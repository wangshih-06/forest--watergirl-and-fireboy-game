è½¯ä»¶åº”ç”¨è®¾è®¡
# å®è®­é¡¹ç›®
é¡¹ç›®åç§°ï¼›æ£®æ—å†°ç«äººæ¸¸æˆ

é¡¹ç›®åˆ†å·¥
ç´ æèµ„æºæ•´åˆåŠuiè®¾è®¡ï¼šå‘¨é–å®‡
éŸ³æ•ˆåŠå…³å¡è®¾è®¡ï¼šä½•æ‰¿ç¥–
ä»£ç è´Ÿè´£äººï¼š é©¬å­å‘¨ ç‹ä»•æ±ª ç‹é€‚æ¶µ
é¡¹ç›®ä¼˜åŒ–æµ‹è¯•åŠä»£ç æ•´åˆï¼šç‹ä»•æ±ª
ï¼ˆæ¯ä¸ªäººå¯æ ¹æ®é¡¹ç›®å®Œæˆè¿›åº¦åˆç†å®Œæˆå…¶ä»–å·¥ä½œï¼‰

#é¡¹ç›®ç»“æ„ï¼š
forest-fireboy-watergirl/
â”‚â”€â”€ src/main/java/com/game/
â”‚   â”‚â”€â”€ Main.java                  // ç¨‹åºå…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ GameEngine.java        // æ¸¸æˆä¸»å¾ªç¯ã€åœºæ™¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ GameConfig.java        // å…¨å±€å¸¸é‡é…ç½®ï¼ˆé‡åŠ›ã€é€Ÿåº¦ã€åœ°å›¾å¤§å°ç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ GameController.java    // æ¸¸æˆæ§åˆ¶å™¨ï¼ˆå¤„ç†äº‹ä»¶ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ Character.java         // æŠ½è±¡è§’è‰²ç±»ï¼ˆé€šç”¨ç§»åŠ¨ã€è·³è·ƒã€ç¢°æ’ï¼‰
â”‚   â”‚   â”œâ”€â”€ Fireboy.java           // ç«äººç±»
â”‚   â”‚   â”œâ”€â”€ Watergirl.java         // å†°äººç±»
â”‚   â”‚   â”œâ”€â”€ Diamond.java           // é’»çŸ³
â”‚   â”‚   â”œâ”€â”€ Lever.java             // æ‹‰æ†
â”‚   â”‚   â”œâ”€â”€ Door.java              // ç«é—¨ & æ°´é—¨
â”‚   â”‚   â””â”€â”€ Platform.java          // åœ°å›¾ä¸­çš„å¹³å°ã€é™·é˜±
â”‚   â”‚
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”œâ”€â”€ GameEvent.java         // æ¸¸æˆäº‹ä»¶åŸºç±»
â”‚   â”‚   â”œâ”€â”€ CollisionEvent.java    // ç¢°æ’äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ DiamondEvent.java      // é’»çŸ³æ‹¾å–äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ LeverEvent.java        // æ‹‰æ†äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ DoorEvent.java         // è§’è‰²è¿›å…¥é—¨äº‹ä»¶
â”‚   â”‚   â””â”€â”€ EventListener.java     // äº‹ä»¶ç›‘å¬æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ GameView.java          // æ¸²æŸ“æ¸¸æˆåœºæ™¯
â”‚   â”‚   â”œâ”€â”€ HUD.java               // æ˜¾ç¤ºå¾—åˆ†/å‰©ä½™æ—¶é—´/æç¤º
â”‚   â”‚   â””â”€â”€ SpriteLoader.java      // åŠ è½½ Fireboy/Watergirl å›¾ç‰‡
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ CollisionDetector.java // ç¢°æ’æ£€æµ‹
â”‚       â””â”€â”€ SoundManager.java      // éŸ³æ•ˆç®¡ç†
â”‚
â””â”€â”€ resources/
   â”œâ”€â”€ maps/                      // å…³å¡åœ°å›¾æ–‡ä»¶(JSON/TMX)
   â”œâ”€â”€ sounds/                    // éŸ³æ•ˆ
   â””â”€â”€ images/                    // Fireboy, Watergirl, 


 ä¸€ã€æ•´ä½“æ¶æ„æ€è·¯

æ•´ä¸ªæ¸¸æˆé‡‡ç”¨ åˆ†å±‚æ¶æ„ï¼š
core å±‚ï¼šæ¸¸æˆå¼•æ“ï¼ˆGameEngineï¼‰ã€æ§åˆ¶å™¨ï¼ˆGameControllerï¼‰ã€é…ç½®ï¼ˆGameConfigï¼‰
è´Ÿè´£ä¸»å¾ªç¯ã€é”®ç›˜äº‹ä»¶ã€è§’è‰²æ§åˆ¶ã€å…³å¡é€»è¾‘ã€‚
model å±‚ï¼šæ¸¸æˆå¯¹è±¡ï¼ˆè§’è‰²ã€é’»çŸ³ã€é—¨ã€æ‹‰æ†ã€å¹³å°ï¼‰
å°è£…æ¸¸æˆå®ä½“å¯¹è±¡ï¼Œå®šä¹‰å…¶çŠ¶æ€ï¼ˆä½ç½®ã€é€Ÿåº¦ï¼‰å’Œè¡Œä¸ºï¼ˆç§»åŠ¨ã€æ‹¾å–ã€è§¦å‘ï¼‰ã€‚
events å±‚ï¼šäº‹ä»¶ç³»ç»Ÿ
ä½¿ç”¨ è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå°†â€œæ¸¸æˆé€»è¾‘â€ä¸â€œäº‹ä»¶å¤„ç†â€è§£è€¦ã€‚
ä¾‹å¦‚ï¼šè§’è‰²ç¢°åˆ°é’»çŸ³æ—¶ â†’ è§¦å‘ DiamondEvent â†’ åˆ†å‘ç»™ç›‘å¬å™¨ã€‚
ui å±‚ï¼šç”¨æˆ·ç•Œé¢ï¼ˆGameView, HUDï¼‰
è´Ÿè´£æ¸²æŸ“æ¸¸æˆç”»é¢å’Œ HUDï¼ˆåˆ†æ•°ã€æ—¶é—´ã€æç¤ºï¼‰ã€‚
utils å±‚ï¼šå·¥å…·ç±»ï¼ˆç¢°æ’æ£€æµ‹ã€éŸ³æ•ˆç®¡ç†ç­‰ï¼‰
æä¾›å…¬å…±æœåŠ¡ï¼Œé¿å…é€»è¾‘é‡å¤ã€‚

äºŒã€è¿è¡Œé€»è¾‘æµç¨‹
Main.java å¯åŠ¨ç¨‹åº åˆå§‹åŒ– JavaFX Stage å’Œ Scene
åˆ›å»º GameEngineï¼ŒåŠ è½½åœ°å›¾ä¸è§’è‰²
GameEngine ä¸»å¾ªç¯
æ¯å¸§æ›´æ–°è§’è‰²ä½ç½®ã€æ£€æµ‹ç¢°æ’
è§¦å‘äº‹ä»¶ï¼ˆä¾‹å¦‚è§’è‰²ç¢°åˆ°é’»çŸ³ â†’ DiamondEventï¼‰
é€šçŸ¥ GameView æ›´æ–°ç”»é¢
äº‹ä»¶åˆ†å‘æœºåˆ¶
é€šè¿‡ EventManager å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼š
è§¦å‘è€…ï¼šè§’è‰²ã€ç‰©ä½“ç­‰
äº‹ä»¶ï¼šCollisionEvent, DiamondEvent, LeverEvent, DoorEvent
ç›‘å¬å™¨ï¼šGameControllerã€UIã€éŸ³æ•ˆç®¡ç†å™¨ç­‰
ç©å®¶æ“ä½œè¾“å…¥
GameController ç›‘å¬é”®ç›˜äº‹ä»¶
Fireboyï¼šA, D, W â†’ å·¦å³ç§»åŠ¨ / è·³è·ƒ
Watergirlï¼šâ†, â†’, â†‘ â†’ å·¦å³ç§»åŠ¨ / è·³è·ƒ
ä¸‰ã€æ¥å£è®¾è®¡
1. Characterï¼ˆæŠ½è±¡ç±»ï¼‰
è®¾è®¡ç†ç”±ï¼šFireboy å’Œ Watergirl æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼ˆç§»åŠ¨ã€è·³è·ƒã€é‡åŠ›ï¼‰ï¼Œæ‰€ä»¥æŠ½è±¡å‡ºä¸€ä¸ªçˆ¶ç±»ã€‚
æ¥å£èŒè´£ï¼šå®šä¹‰è§’è‰²çš„åŸºç¡€è¡Œä¸ºã€‚
public abstract class Character {
    void moveLeft();
    void moveRight();
    void jump();
    void update(double gravity);
    Bounds getBounds();

    abstract void onDiamondPickup();
    abstract void onLeverActivate();
    abstract void onEnterDoor();
}

2. EventListenerï¼ˆæ¥å£ï¼‰
è®¾è®¡ç†ç”±ï¼šè®©ä¸åŒæ¨¡å—éƒ½èƒ½è®¢é˜…æ¸¸æˆäº‹ä»¶ï¼ˆUI å¯ä»¥æ˜¾ç¤ºæç¤ºï¼ŒéŸ³æ•ˆæ¨¡å—å¯ä»¥æ’­æ”¾éŸ³æ•ˆï¼‰ã€‚
èŒè´£ï¼šæŠ½è±¡å‡ºä¸€ä¸ªäº‹ä»¶å¤„ç†æ–¹æ³•ã€‚
@FunctionalInterface
public interface EventListener {
    void handle(GameEvent event);
}

3. GameEventï¼ˆæŠ½è±¡äº‹ä»¶ç±»ï¼‰
è®¾è®¡ç†ç”±ï¼šæ‰€æœ‰äº‹ä»¶éƒ½å…±äº«ä¸€ä¸ªçˆ¶ç±»ï¼Œä¾¿äºæ‰©å±•ã€‚
èŒè´£ï¼šå®šä¹‰é€šç”¨äº‹ä»¶ä¿¡æ¯ï¼ˆæ—¶é—´æˆ³ã€ç±»å‹ï¼‰ã€‚
public abstract class GameEvent {
    private final long timestamp = System.currentTimeMillis();
    public abstract String getType();
}

4. EventManagerï¼ˆäº‹ä»¶åˆ†å‘å™¨ï¼‰

è®¾è®¡ç†ç”±ï¼šä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œç®¡ç†äº‹ä»¶ç›‘å¬å™¨ã€‚
èŒè´£ï¼šè´Ÿè´£æ³¨å†Œç›‘å¬å™¨ & å¹¿æ’­äº‹ä»¶ã€‚
public class EventManager {
    void register(EventListener listener);
    void unregister(EventListener listener);
    void fireEvent(GameEvent event);
}

5. å„ç§äº‹ä»¶æ¥å£å®ç°

CollisionEventï¼šè§’è‰²ç¢°æ’åˆ°ç‰©ä½“
DiamondEventï¼šè§’è‰²æ‹¾å–é’»çŸ³
LeverEventï¼šè§’è‰²è§¦å‘æ‹‰æ†
DoorEventï¼šè§’è‰²è¿›å…¥é—¨
ğŸ‘‰ ç»Ÿä¸€ç»§æ‰¿ GameEventï¼Œå¹¶æºå¸¦ä¸åŒçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆè§’è‰²ã€ç‰©ä½“ï¼‰ã€‚
6. GameControllerï¼ˆæ§åˆ¶å™¨ï¼‰
è®¾è®¡ç†ç”±ï¼šè§£è€¦è¾“å…¥äº‹ä»¶ä¸è§’è‰²è¡Œä¸ºã€‚
èŒè´£ï¼šæŠŠé”®ç›˜è¾“å…¥æ˜ å°„åˆ° Fireboy & Watergirl çš„è¡Œä¸ºã€‚
public class GameController {
    void bindKeyEvents(Scene scene);
    void onDiamondCollected(Diamond diamond);
}
7. GameEngineï¼ˆä¸»å¾ªç¯ï¼‰
è®¾è®¡ç†ç”±ï¼šç»Ÿä¸€è°ƒåº¦æ›´æ–°ã€äº‹ä»¶æ£€æµ‹ã€æ¸²æŸ“ã€‚
èŒè´£ï¼š
æ›´æ–°è§’è‰²çŠ¶æ€ï¼ˆé‡åŠ›ã€ç§»åŠ¨ï¼‰
æ£€æµ‹ç¢°æ’ï¼ˆé’»çŸ³ã€æ‹‰æ†ã€é—¨ï¼‰
è§¦å‘å¯¹åº”äº‹ä»¶
è°ƒç”¨ GameView æ¸²æŸ“
å››ã€æ¥å£è®¾è®¡æ€»ç»“

è§’è‰²æ¥å£ï¼ˆæŠ½è±¡ç±» Characterï¼‰ï¼šå±è”½è§’è‰²å·®å¼‚ï¼Œå®šä¹‰ç»Ÿä¸€ APIã€‚
äº‹ä»¶æ¥å£ï¼ˆEventListener + GameEventï¼‰ï¼šé‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè§£è€¦é€»è¾‘ä¸å“åº”ã€‚
å¼•æ“æ¥å£ï¼ˆGameEngine + GameControllerï¼‰ï¼šæ§åˆ¶å¾ªç¯ä¸è¾“å…¥ï¼Œä½œä¸ºç³»ç»Ÿâ€œå¤§è„‘â€ã€‚
UI æ¥å£ï¼ˆGameViewï¼‰ï¼šåªå…³å¿ƒå¦‚ä½•æ¸²æŸ“ï¼Œä¸å…³å¿ƒä¸šåŠ¡é€»è¾‘ã€‚
è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š
é«˜å†…èšï¼Œä½è€¦åˆ â†’ è§’è‰²é€»è¾‘ã€äº‹ä»¶åˆ†å‘ã€UI æ¸²æŸ“å„è‡ªç‹¬ç«‹ã€‚
æ˜“æ‰©å±• â†’ æƒ³å¢åŠ â€œå¼€å…³æœºå…³äº‹ä»¶â€æˆ–â€œé™·é˜±äº‹ä»¶â€ï¼Œåªéœ€å¢åŠ ä¸€ä¸ªæ–°äº‹ä»¶ç±»ã€‚
å¤šç›‘å¬å™¨æ”¯æŒ â†’ UIã€éŸ³æ•ˆã€åˆ†æ•°ç»Ÿè®¡æ¨¡å—éƒ½èƒ½è®¢é˜…åŒä¸€ä¸ªäº‹ä»¶ã€‚

 
ç¬¬ä¸€å¤©å·¥ä½œæ¦‚è¦ï¼š
1.æœç´¢èµ„æº
2.è®¾è®¡éŸ³æ•ˆ
3.é…ç½®ç›¸å…³ç¯å¢ƒ
4.å®Œå–„é¡¹ç›®ç»“æ„åŠå¯¹åº”çš„æ¥å£
